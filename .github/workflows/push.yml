name: Update files
on:
  push:
    branches:
      - 'main'
      - 'web-app'
  workflow_dispatch:

jobs:
  Update-Files:
    runs-on: ubuntu-latest

    steps:
      - name: Check out repository main code
        uses: actions/checkout@v2
        with:
          fetch-depth: 0
          ref: main
          path: main
      - name: Check out repository web-app code
        uses: actions/checkout@v2
        with:
          fetch-depth: 0
          ref: web-app
          path: web-app
      - name: Merge main and web-app
        run: |
          mv main/* .
          mv web-app/* .
          rm -r main
          rm -r web-app
      - name: Update files
        uses: test-room-7/action-update-file@v1
        with:
            file-path: '*'
            commit-msg: Update Files
            github-token: ${{ secrets.GITHUB_TOKEN }}
            branch: pages